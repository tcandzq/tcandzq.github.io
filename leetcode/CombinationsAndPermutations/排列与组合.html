<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>leetcode中的组合与排列问题详解 | 热心市民的博客</title>
    <meta name="description" content="谁能证明你在人间来过">
    
    
    <link rel="preload" href="/assets/css/0.styles.74efe9eb.css" as="style"><link rel="preload" href="/assets/js/app.689e760c.js" as="script"><link rel="preload" href="/assets/js/2.fcc9d3c8.js" as="script"><link rel="preload" href="/assets/js/16.45579b69.js" as="script"><link rel="prefetch" href="/assets/js/10.5e352e68.js"><link rel="prefetch" href="/assets/js/11.6ff597ae.js"><link rel="prefetch" href="/assets/js/12.aa484f53.js"><link rel="prefetch" href="/assets/js/13.cb54e54c.js"><link rel="prefetch" href="/assets/js/14.0b8eee92.js"><link rel="prefetch" href="/assets/js/15.2c8b7315.js"><link rel="prefetch" href="/assets/js/17.fb9b52b4.js"><link rel="prefetch" href="/assets/js/18.b4dd4c68.js"><link rel="prefetch" href="/assets/js/3.9831cf93.js"><link rel="prefetch" href="/assets/js/4.9f5c36e4.js"><link rel="prefetch" href="/assets/js/5.b797c966.js"><link rel="prefetch" href="/assets/js/6.3d68dbf6.js"><link rel="prefetch" href="/assets/js/7.749f93f9.js"><link rel="prefetch" href="/assets/js/8.eda75f69.js"><link rel="prefetch" href="/assets/js/9.e9fb1936.js">
    <link rel="stylesheet" href="/assets/css/0.styles.74efe9eb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">热心市民的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">工程</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link router-link-active">leetcode</a></div> <a href="https://github.com/tcandzq/My-Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">工程</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link router-link-active">leetcode</a></div> <a href="https://github.com/tcandzq/My-Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>常见数据结构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/leetcode/BinaryTree/二叉树.html" class="sidebar-link">二叉树常见知识点</a></li><li><a href="/leetcode/CombinationsAndPermutations/排列与组合.html" class="active sidebar-link">leetcode中的组合与排列问题详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/leetcode/CombinationsAndPermutations/排列与组合.html#全排列问题" class="sidebar-link">全排列问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/leetcode/CombinationsAndPermutations/排列与组合.html#模板解法1" class="sidebar-link">模板解法1</a></li><li class="sidebar-sub-header"><a href="/leetcode/CombinationsAndPermutations/排列与组合.html#模板解法2" class="sidebar-link">模板解法2</a></li></ul></li><li class="sidebar-sub-header"><a href="/leetcode/CombinationsAndPermutations/排列与组合.html#组合问题" class="sidebar-link">组合问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/leetcode/CombinationsAndPermutations/排列与组合.html#模板解法1-2" class="sidebar-link">模板解法1</a></li><li class="sidebar-sub-header"><a href="/leetcode/CombinationsAndPermutations/排列与组合.html#模板解法2-2" class="sidebar-link">模板解法2</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="leetcode中的组合与排列问题详解"><a href="#leetcode中的组合与排列问题详解" aria-hidden="true" class="header-anchor">#</a> leetcode中的组合与排列问题详解</h1> <p>排列与组合问题都是LeetCode中非常经典的问题，解决两类问题的代码都有固定的模板写法，但其中的很多细节值得深思和研究。
解决这类问题一般都是使用回溯算法。</p> <blockquote><p>“回溯搜索”算法=“深度优先遍历 + 状态重置 + 剪枝”</p></blockquote> <p>1.<strong>将搜索问题转化为树问题</strong>，通常通过构造树列举出所有可能的情况(一般使用递归实现)；
2.树的叶子结点是问题的可行解,但可能不是最终解，比如出现重复的情况;
3.根据约束条件对构造后的树进行剪枝，一方面可以从可行解中晒选得到最终解，另一方面能减少时间复杂度</p> <h2 id="全排列问题"><a href="#全排列问题" aria-hidden="true" class="header-anchor">#</a> 全排列问题</h2> <p>给定一个没有重复数字的序列，返回其所有可能的全排列。
<strong>输入</strong>:[1,2,3]
<strong>输出</strong>:[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</p> <h3 id="模板解法1"><a href="#模板解法1" aria-hidden="true" class="header-anchor">#</a> 模板解法1</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">permute</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment"># index:当前处理的数</span>
    <span class="token comment"># used:已经处理的数</span>
    <span class="token comment"># pre：已经处理的数组成的数组</span>
    <span class="token comment"># res:存储完整遍历一次结果的数组</span>
    used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
    res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    __dfs<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> used<span class="token punctuation">,</span> res<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res


<span class="token keyword">def</span> <span class="token function">__dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> index<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> used<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 先写递归终止条件</span>
    <span class="token keyword">if</span> index <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
        res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pre<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token comment"># 这个循环的理解有两种方式1:对所有可能的数进行组合;2.当走到第n层的某个结点进行操作时,理论上会有len(nums)种岔路可以走,但其中已经有n-1条路</span>
    <span class="token comment"># 已经走过了所以 不能再走了 故加一个逻辑判断 这个引出了第二种写法</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token comment"># 如果没有用过，就用它</span>
            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>   <span class="token comment"># 标记这个数已经被用过了</span>
            pre<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 将这个数添加到pre中</span>

            <span class="token comment"># 在 dfs 前后，代码是对称的</span>
            __dfs<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> pre<span class="token punctuation">,</span> used<span class="token punctuation">,</span> res<span class="token punctuation">)</span>  <span class="token comment"># 进入下一个分支</span>
            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
            pre<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 状态重置 这条路已经完整的走完了需要一直回退到上一个分支点 准备进入下一个岔路。而这个岔路是可以进入上一次走过的路径</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="模板解法2"><a href="#模板解法2" aria-hidden="true" class="header-anchor">#</a> 模板解法2</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">permute2</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> nums<span class="token punctuation">:</span>
            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            backtrack<span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token punctuation">:</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tmp <span class="token operator">+</span> <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    backtrack<span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="组合问题"><a href="#组合问题" aria-hidden="true" class="header-anchor">#</a> 组合问题</h2> <p>给定一个无重复元素的数组 candidates 和一个目标数 target ，找出 candidates 中所有可以使数字和为 target 的组合。</p> <p>candidates 中的数字可以无限制重复被选取。</p> <p>说明：</p> <p>所有数字（包括 target）都是正整数。
解集不能包含重复的组合。
示例 1:</p> <p>输入: candidates = [2,3,6,7], target = 7,
所求解集为:
[[7],[2,2,3]]</p> <p>示例 2:</p> <p>输入: candidates = [2,3,5], target = 8,
所求解集为:
[[2,2,2,2],[2,3,3],[3,5]]</p> <h3 id="模板解法1-2"><a href="#模板解法1-2" aria-hidden="true" class="header-anchor">#</a> 模板解法1</h3> <p>用不断递减的思路</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>    <span class="token keyword">def</span> <span class="token function">combinationSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> candidates<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>candidates<span class="token punctuation">)</span>
        <span class="token keyword">if</span> size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token comment"># 剪枝的前提是数组元素排序</span>
        <span class="token comment"># 深度深的边不能比深度浅的边还小</span>
        <span class="token comment"># 要排序的理由：1、前面用过的数后面不能再用；2、下一层边上的数不能小于上一层边上的数。</span>
        candidates<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 在遍历的过程中记录路径，一般而言它是一个栈</span>
        path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 使用栈</span>
        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment"># 注意要传入 size ，在 range 中， size 取不到</span>
        self<span class="token punctuation">.</span>__dfs<span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> path<span class="token punctuation">,</span> res<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
        <span class="token keyword">return</span> res

    <span class="token keyword">def</span> <span class="token function">__dfs</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> candidates<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> size<span class="token punctuation">,</span> path<span class="token punctuation">,</span> res<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 先写递归终止的情况</span>
        <span class="token keyword">if</span> target <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token comment"># Python 中可变对象是引用传递，因此需要将当前 path 里的值拷贝出来</span>
            <span class="token comment"># 或者使用 path.copy()</span>
            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">:</span>
            residue <span class="token operator">=</span> target <span class="token operator">-</span> candidates<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
            <span class="token comment"># “剪枝”操作，不必递归到下一层，并且后面的分支也不必执行</span>
            <span class="token keyword">if</span> residue <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">break</span>
            path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment"># 因为下一层不能比上一层还小，起始索引还从 index 开始</span>
            self<span class="token punctuation">.</span>__dfs<span class="token punctuation">(</span>candidates<span class="token punctuation">,</span> index<span class="token punctuation">,</span> size<span class="token punctuation">,</span> path<span class="token punctuation">,</span> res<span class="token punctuation">,</span> residue<span class="token punctuation">)</span>
            path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 状态重置</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="模板解法2-2"><a href="#模板解法2-2" aria-hidden="true" class="header-anchor">#</a> 模板解法2</h3> <p>用累加和的思路</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code> <span class="token keyword">def</span> <span class="token function">combinationSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> candidates<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        candidates<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>candidates<span class="token punctuation">)</span>
        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">def</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> tmp_sum<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span>  tmp_sum <span class="token operator">&gt;</span> target <span class="token keyword">or</span> i <span class="token operator">==</span> n<span class="token punctuation">:</span>
                <span class="token keyword">return</span> 
            <span class="token keyword">if</span> tmp_sum <span class="token operator">==</span> target<span class="token punctuation">:</span>
                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
                <span class="token keyword">return</span> 
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> tmp_sum <span class="token operator">+</span> candidates<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">:</span>
                    <span class="token keyword">break</span>
                backtrack<span class="token punctuation">(</span>j<span class="token punctuation">,</span>tmp_sum <span class="token operator">+</span> candidates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>tmp<span class="token operator">+</span><span class="token punctuation">[</span>candidates<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 索引从i开始</span>
        backtrack<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> res

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>有两个地方值得思考:</p> <ul><li>for循环中起始索引为什么从<strong>i</strong>开始，而不是0开始?</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code> for j in range(i, n):
	 if tmp_sum + candidates[j] &gt; target:
	     break
     backtrack(0,tmp_sum + candidates[j],tmp+[candidates[j]]) # 起始索引从0开始
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>回答</strong>：for循环中的每个元素代表根结点下一层的每一个分支。如果每个分支的索引从0开始，则会出现该节点的分支上的值是该节点前面位置的值，会出现重复的情况比如2---&gt;3和3---&gt;2   这两个其实是同一种情况。因此，通过先对数组进行排序，然后index从当前节点开始，保证节点下一层每个分支节点的值比上一层节点的值大，例如只保存2---&gt;3，剪枝3---&gt;2。这样就能避免重复的情况。</p> <ul><li>tmp_sum 和 tmp为什么通过递归函数的入参实现，而不是通过变量的形式?例如下面的代码：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>for j in range(i, n):
	if tmp_sum + candidates[j] &gt; target:
	    break
	    tmp_sum += candidates[j]
	    tmp += [candidates[j]]
	backtrack(j,tmp_sum ,tmp) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tcandzq/My-Blog/edit/master/leetcode/CombinationsAndPermutations/排列与组合.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/leetcode/BinaryTree/二叉树.html" class="prev">
          二叉树常见知识点
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.689e760c.js" defer></script><script src="/assets/js/2.fcc9d3c8.js" defer></script><script src="/assets/js/16.45579b69.js" defer></script>
  </body>
</html>
